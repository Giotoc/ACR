<?xml version="1.0" encoding="UTF-8"?>
<view xmlns="http://asyncode.com/View"
  xmlns:fs="http://asyncode.com/filesystem">
  <param name="viewName"/>
  <define name="content" command="fs:get" fs:path="/views/{$viewName}"/>
  <define name="layout">
    <pageTitle>IDE: edit view</pageTitle>
    <script>
YUI({
  combine: true,
  timeout: 10000
  }).use("io","node","console",
  function(Y)
  {
    var start=function()
    {
      if (Y.UA.mobile)
      {
        Y.all("div.edit").setStyle("display","block")
        Y.all("textarea").setStyle("width","100px")
      }
      if (!Y.UA.mobile)
        Y.Get.script("http://e.fstatic.eu/cm/js/codemirror.js",{
          onSuccess: function()
          {
              CodeMirror.fromTextArea('content',
              {
                height: "500px",
                width:"800px",
                parserfile: "parsexml.js",
                stylesheet: "http://e.fstatic.eu/cm/css/xmlcolors.css",
                path: "http://e.fstatic.eu/cm/js/",
                continuousScanning: 500,
                disableSpellcheck:false,
                lineNumbers: true
              })
          }
        })
      //Y.one("#content")._node().focus()
    }
    Y.one("window").on("load",start)
  }
)
    </script>
    <block name="body">
      <widget type="template">
        <h2>Edit view</h2>
      </widget>
      <widget type="form" name="form" action="/IDE:updateView">
        <item name="viewName" type="hidden">{$viewName}</item>
        <item name="content" value="content" type="textarea"/>
      </widget>
    </block>
  </define>
</view>
